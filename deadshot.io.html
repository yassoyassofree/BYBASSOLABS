<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Simple Shooter Game</title>
<style>
  canvas {
    border: 1px solid black;
    background-color: #eee;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

class Player {
  constructor() {
    this.x = 100;
    this.y = 100;
    this.width = 40;
    this.height = 40;
    this.speed = 4;
    this.color = 'blue';
    this.shootCooldown = 0;
  }

  move() {
    if (keys['ArrowUp'] || keys['w']) this.y -= this.speed;
    if (keys['ArrowDown'] || keys['s']) this.y += this.speed;
    if (keys['ArrowLeft'] || keys['a']) this.x -= this.speed;
    if (keys['ArrowRight'] || keys['d']) this.x += this.speed;

    // Keep within boundaries
    this.x = Math.max(0, Math.min(canvas.width - this.width, this.x));
    this.y = Math.max(0, Math.min(canvas.height - this.height, this.y));
  }

  draw() {
    ctx.fillStyle = this.color;
    ctx.fillRect(this.x, this.y, this.width, this.height);
  }

  shoot() {
    if (this.shootCooldown === 0 && keys[' ']) { // Spacebar to shoot
      projectiles.push(new Projectile(this.x + this.width/2, this.y));
      this.shootCooldown = 15; // cooldown frames
    }
    if (this.shootCooldown > 0) this.shootCooldown--;
  }
}

class Projectile {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.radius = 5;
    this.speed = 8;
    this.color = 'red';
  }

  update() {
    this.y -= this.speed;
  }

  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
    ctx.fillStyle = this.color;
    ctx.fill();
  }
}

class Map {
  constructor() {
    this.walls = [
      {x: 200, y: 150, width: 400, height: 20},
      {x: 200, y: 430, width: 400, height: 20},
      {x: 200, y: 150, width: 20, height: 300},
      {x: 580, y: 150, width: 20, height: 300}
    ];
  }

  draw() {
    ctx.fillStyle = 'gray';
    this.walls.forEach(w => {
      ctx.fillRect(w.x, w.y, w.width, w.height);
    });
  }

  checkCollision(x, y, w, h) {
    for (let wall of this.walls) {
      if (
        x < wall.x + wall.width &&
        x + w > wall.x &&
        y < wall.y + wall.height &&
        y + h > wall.y
      ) {
        return true;
      }
    }
    return false;
  }
}

const player = new Player();
const map = new Map();
const projectiles = [];

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Player movement
  player.move();

  // Collision with walls
  if (map.checkCollision(player.x, player.y, player.width, player.height)) {
    // simple bounce back or stop movement
    // For simplicity, just stop movement here
  }

  // Shooting
  player.shoot();

  // Draw map
  map.draw();

  // Draw player
  player.draw();

  // Update and draw projectiles
  for (let i = projectiles.length - 1; i >= 0; i--) {
    const p = projectiles[i];
    p.update();

    // Remove off-screen projectiles
    if (p.y < 0) {
      projectiles.splice(i, 1);
    } else {
      p.draw();
    }
  }

  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
    <script>
        function exitToHome() {
            window.location.href = 'index.html';
        }

        // ESC key to exit
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                exitToHome();
            }
        });
    </script>
</html>